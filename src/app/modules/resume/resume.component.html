<div
  class="resume-container !max-w-4xl p-8 mx-auto mt-10 relative {{
    userPref.secondaryBackground
  }} { userPref.themeText } shadow-xl"
  id="HelloBro"
>
  <!-- Header -->
  <div
    class="flex flex-col sm:flex-row items-start sm:items-center justify-between pb-4 mb-6 border-b {{
      userPref.themeText
    }} border-opacity-30"
  >
    <div class="w-full sm:w-auto">
      <h1
        class="text-4xl font-bold roboto-bold {{ userPref.themeText }} truncate"
        data-aos="zoom-in"
        data-aos-duration="800"
      >
        {{ me.name }}
      </h1>
      <p
        class="mt-2 text-sm {{
          userPref.themeText
        }} flex flex-wrap items-center gap-4"
      >
        <a
          [href]="'mailto:' + me.email"
          class="flex items-center transition-all duration-300 roboto-regular hover:underline"
        >
          <fa-icon
            [icon]="['fas', 'envelope']"
            class="mr-1 cursor-pointer"
          ></fa-icon>
          {{ me.email }}
        </a>
        <a
          [href]="me.telegram"
          target="_blank"
          class="flex items-center transition-all duration-300 roboto-regular hover:underline"
        >
          <fa-icon
            [icon]="['fab', 'telegram']"
            class="mr-1 cursor-pointer"
          ></fa-icon>
          Telegram
        </a>
      </p>
    </div>
    <div class="w-full mt-4 text-right sm:w-auto sm:mt-0">
      <p class="flex items-center justify-end text-sm roboto-regular">
        <fa-icon [icon]="['fas', 'map-marker']" class="mr-1"></fa-icon>
        {{ me.location }}
      </p>
    </div>
  </div>

  <section class="mb-8" data-aos="fade-up" data-aos-duration="1000">
    <p
      class="text-sm {{ userPref.themeText }} roboto-regular"
      [innerHTML]="me.aboutMe"
    ></p>
  </section>

  <!-- Skills Section -->
  <section class="mb-8" data-aos="fade-up" data-aos-duration="1000">
    <h2
      class="pb-2 mb-4 text-2xl roboto-bold border-b {{ userPref.themeText }}"
    >
      Skills & Abilities
    </h2>
    <ul class="pl-5 space-y-1 list-disc">
      <li
        class="roboto-regular"
        *ngFor="let item of me.skills"
        data-aos="fade-up"
        data-aos-duration="1000"
      >
        {{ item }}
      </li>
    </ul>
  </section>

  <!-- Education Section -->
  <section class="mb-8" data-aos="fade-up" data-aos-duration="800">
    <h2
      class="pb-2 mb-4 text-2xl roboto-bold border-b {{
        userPref.themeText
      }} flex items-center"
    >
      <fa-icon [icon]="['fas', 'graduation-cap']" class="mr-2"></fa-icon>
      Education
    </h2>
    <div
      class="flex mb-6"
      *ngFor="let item of me.education; let i = index"
      [attr.data-aos]="'fade-up'"
      [attr.data-aos-delay]="i * 200"
      data-aos-duration="800"
    >
      <div class="flex-shrink-0 mr-4">
        <div
          class="w-0.5 h-full {{ userPref.themeBackground }} opacity-50 ml-1.5"
        ></div>
      </div>
      <div>
        <p class="text-lg font-bold roboto-bold {{ userPref.themeText }}">
          {{ item.title }}
        </p>
        <p class="text-sm font-semibold roboto-regular opacity-80">
          {{ item.content }}
        </p>
      </div>
    </div>
  </section>

  <!-- Work Experience Section -->
  <section class="mb-8" data-aos="fade-up" data-aos-duration="800">
    <h2
      class="pb-2 mb-4 text-2xl roboto-bold border-b {{
        userPref.themeText
      }} flex items-center"
    >
      <fa-icon [icon]="['fas', 'briefcase']" class="mr-2"></fa-icon>
      Work Experience
    </h2>
    <div
      class="relative mb-6"
      *ngFor="let item of me.experiences; let i = index"
      [attr.data-aos]="'fade-up'"
      [attr.data-aos-delay]="i * 100"
      data-aos-duration="800"
    >
      <div class="flex">
        <div class="flex-shrink-0 mr-4">
          <div
            class="w-0.5 h-full {{
              userPref.themeBackground
            }} opacity-50 ml-1.5"
            *ngIf="i < me.experiences.length"
          ></div>
        </div>
        <div class="flex-grow">
          <div
            class="flex flex-col sm:flex-row sm:justify-between sm:items-center"
          >
            <p class="text-lg roboto-bold {{ userPref.themeText }}">
              {{ item.title }}
            </p>
            <p
              class="text-sm italic opacity-75 roboto-regular"
              *ngIf="item.date"
            >
              {{ item.date }}
            </p>
          </div>
          <div class="pl-0 mt-2">
            <p class="text-sm leading-relaxed roboto-regular">
              {{ item.content }}
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Projects Section -->
  <section class="mb-8" data-aos="fade-up" data-aos-duration="1000">
    <h2
      class="pb-2 mb-4 text-2xl roboto-bold border-b {{ userPref.themeText }}"
    >
      Projects
    </h2>
    <ul class="pl-5 space-y-2 text-sm list-disc">
      <li
        *ngFor="let item of me.projects"
        class="py-1 roboto-regular"
        data-aos="fade-up"
        data-aos-duration="1000"
      >
        <strong class="roboto-bold">{{ item.title }}</strong
        >: {{ item.content }}
      </li>
    </ul>
  </section>

  <!-- Additional Skills Section -->
  <section class="mb-20" data-aos="fade-up" data-aos-duration="800">
    <h2
      class="pb-2 mb-4 text-2xl roboto-bold border-b {{
        userPref.themeText
      }} flex items-center"
    >
      <fa-icon [icon]="['fas', 'plus-circle']" class="mr-2"></fa-icon>
      Additional Skills
    </h2>
    <div class="flex flex-wrap gap-2 p-2">
      <nz-tag
        *ngFor="let item of me.additional; let i = index"
        class="border-none shadow-sm transition-all duration-300 ease-in-out bg-opacity-20 dark:bg-200/20 bg-gray-400/20 hover:bg-opacity-30 dark:hover:bg-opacity-30 rounded-md {{
          userPref.themeText
        }}"
        [attr.data-aos]="'zoom-in'"
        [attr.data-aos-delay]="i * 50"
        data-aos-duration="600"
      >
        <div class="flex items-center gap-1 px-1 py-0.5">
          <nz-icon
            class="text-sm"
            [nzType]="item.isProcessing ? 'sync' : 'check-circle'"
            [nzSpin]="item.isProcessing"
          ></nz-icon>
          <span class="text-sm font-medium">{{ item.title }}</span>
        </div>
      </nz-tag>
    </div>
  </section>
  <footer
    class="absolute bottom-0 left-0 w-full py-4 px-4 transition-opacity duration-300 {{
      userPref.contentBackground
    }} opacity-25 hover:opacity-100 hover:bg-gray-300 group"
  >
    <div
      data-aos="fade-right"
      data-aos-duration="1000"
      class="flex flex-wrap items-center justify-center gap-4 transition-opacity duration-300 md:justify-between opacity-15 group-hover:opacity-100"
    >
      <!-- Full Screen Button -->
      <button
        class="p-2 {{ userPref.themeText }} flex items-center space-x-2"
        nz-tooltip="Toggle full screen"
        (click)="toggleFullScreen()"
      >
        <fa-icon
          [icon]="['fas', !isFullScreen ? 'expand' : 'compress']"
        ></fa-icon>
        <span class="hidden text-sm md:inline">{{
          !isFullScreen ? "Full screen" : "Exit full screen"
        }}</span>
      </button>

      <!-- Share Button -->
      <button
        class="p-2 {{ userPref.themeText }} flex items-center space-x-2"
        (click)="showModal()"
      >
        <fa-icon [icon]="['fas', 'share']"></fa-icon>
        <span class="hidden text-sm md:inline">Share</span>
      </button>

      <!-- Toggle Animation Button -->
      <button
        nz-tooltip="On scroll animation"
        class="p-2 {{ userPref.themeText }} flex items-center space-x-2"
        (click)="playOrPauseAos()"
      >
        <fa-icon [icon]="['fas', isDisableAos ? 'pause' : 'play']"></fa-icon>
        <span class="hidden text-sm md:inline">{{
          isDisableAos ? "Pause Animation" : "Play Animation"
        }}</span>
      </button>
    </div>
  </footer>
</div>

<!-- Share modal  -->
<nz-modal
  [(nzVisible)]="shareModalVisible"
  [nzMaskClosable]="true"
  (nzOnCancel)="handleCancel()"
  [nzFooter]="null"
  [nzCentered]="true"
>
  <ng-container *nzModalContent>
    <div class="share-content">
      <!-- Share Buttons -->
      <div class="flex justify-center mt-4 space-x-4 share-buttons">
        <!-- E-mail Share Button -->
        <button
          nz-button
          nz-size="large"
          (click)="shareResume('email')"
          class="w-16 h-16 mr-2 text-white transition duration-300 bg-blue-500 rounded-full hover:bg-blue-600"
        >
          <fa-icon
            [icon]="['fas', 'envelope']"
            class="cursor-pointer fa-2x"
          ></fa-icon>
        </button>

        <!-- Facebook Share Button -->
        <!-- <button
          nz-button
          nz-size="large"
          (click)="shareResume('facebook')"
          class="w-16 h-16 mr-2 text-white transition duration-300 bg-blue-500 rounded-full hover:bg-blue-600"
        >
          <fa-icon
            [icon]="['fab', 'facebook']"
            class="cursor-pointer fa-2x"
          ></fa-icon>
        </button> -->

        <!-- Telegram Share Button -->
        <button
          nz-button
          nz-size="large"
          (click)="shareResume('telegram')"
          class="w-16 h-16 mr-2 text-white transition duration-300 bg-blue-500 rounded-full hover:bg-blue-600"
        >
          <fa-icon
            [icon]="['fab', 'telegram']"
            class="cursor-pointer fa-2x"
          ></fa-icon>
        </button>

        <!-- Add more buttons for other platforms here -->
      </div>

      <!-- Copy to Clipboard -->
      <div class="flex items-center justify-center p-4 mt-4">
        <nz-input-group [nzAddOnAfter]="inputButton">
          <input type="text" nz-input placeholder="url" [value]="url" />
        </nz-input-group>

        <ng-template #inputButton>
          <span class="cursor-pointer" (click)="copyToClipboard(url)"
            >Copy</span
          >
        </ng-template>
      </div>
    </div>
  </ng-container>
</nz-modal>

<!-- Floating button -->
<button
  (click)="onModalStateChange()"
  class="fixed z-50 flex items-center justify-center w-6 h-6 transition-all duration-300 rounded-full shadow-lg top-24 right-10 bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 hover:scale-110 hover:shadow-2xl hover:shadow-red-500/25 animate-pulse hover:animate-none ring-2 ring-white/30 hover:ring-white/50 before:absolute before:inset-0 before:rounded-full before:bg-gradient-to-r before:from-red-400 before:to-pink-500 before:animate-ping before:opacity-20 active:scale-95 transform-gpu"
>
  <fa-icon
    [icon]="['fas', 'circle-info']"
    class="text-[13px] text-white transition-all duration-200"
  ></fa-icon>
</button>

<!-- Modal -->
<div *ngIf="modalState">
  <div
    class="relative z-10"
    aria-labelledby="dialog-title"
    role="dialog"
    aria-modal="true"
  >
    <div
      class="fixed inset-0 transition-opacity duration-300 ease-in-out bg-black bg-opacity-50"
      aria-hidden="true"
    ></div>

    <!-- Modal Container -->
    <div class="fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-0">
      <div
        class="relative w-full max-w-sm px-6 py-5 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl dark:bg-zinc-800 rounded-xl sm:my-8 sm:p-6"
      >
        <div
          class="flex items-center justify-center mx-auto bg-blue-100 rounded-full size-12"
        >
          <button
            (click)="onModalStateChange()"
            class="flex items-center justify-center w-6 h-6 transition-all duration-300 rounded-full shadow-lg top-24 right-10 bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 hover:scale-110 hover:shadow-2xl hover:shadow-red-500/25 animate-pulse hover:animate-none ring-2 ring-white/30 hover:ring-white/50 before:absolute before:inset-0 before:rounded-full before:bg-gradient-to-r before:from-red-400 before:to-pink-500 before:animate-ping before:opacity-20 active:scale-95 transform-gpu"
          >
            <fa-icon
              [icon]="['fas', 'circle-info']"
              class="text-[13px] text-white transition-all duration-200"
            ></fa-icon>
          </button>
        </div>

        <div class="mt-4 text-center">
          <h3
            class="text-lg font-semibold text-gray-900 dark:text-white"
            id="dialog-title"
          >
            Public Info Notice
          </h3>
          <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">
            This is a public page — some details like my workplace or projects
            may also appear in job applications or my physical CV.
          </p>
        </div>

        <!-- CTA Button -->
        <div class="mt-6">
          <button
            (click)="onModalStateChange()"
            class="inline-flex justify-center w-full px-4 py-2 text-sm font-medium text-white transition-all duration-200 bg-red-500 rounded-md shadow-sm hover:bg-red-600"
          >
            Close
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
